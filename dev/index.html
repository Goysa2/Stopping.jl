<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Stopping.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/style.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Stopping.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Purpose-1"><span>Purpose</span></a></li><li><a class="tocitem" href="#Functions-1"><span>Functions</span></a></li><li><a class="tocitem" href="#How-to-install-1"><span>How to install</span></a></li><li><a class="tocitem" href="#Example-1"><span>Example</span></a></li><li><a class="tocitem" href="#Long-Term-Goals-1"><span>Long-Term Goals</span></a></li></ul></li><li><a class="tocitem" href="api/">API</a></li><li><a class="tocitem" href="tutorial/">Examples and tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Goysa2/Stopping.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Stopping.jl-1"><a class="docs-heading-anchor" href="#Stopping.jl-1">Stopping.jl</a><a class="docs-heading-anchor-permalink" href="#Stopping.jl-1" title="Permalink"></a></h1><p>Documentation for Stopping.jl</p><h2 id="Purpose-1"><a class="docs-heading-anchor" href="#Purpose-1">Purpose</a><a class="docs-heading-anchor-permalink" href="#Purpose-1" title="Permalink"></a></h2><p>Tools to ease the uniformization of stopping criteria in iterative solvers.</p><p>When a solver is called on an optimization model, four outcome may happen:</p><ol><li>the approximate solution is obtained, the problem is considered solved</li><li>the problem is declared unsolvable (unboundedness, infeasibility ...)</li><li>the maximum available ressources is not sufficient to compute the solution</li><li>some algorithm dependent failure happens</li></ol><p>This tool eases the first 3 items above. It defines a type</p><pre><code class="language-none">mutable struct GenericStopping &lt;: AbstractStopping
    problem       :: Any          # an arbitrary instance of a problem
    meta          :: StoppingMeta # contains the used parameters
    current_state :: State        # the current state</code></pre><p>The <a href="https://github.com/Goysa2/Stopping.jl/blob/master/src/StoppingMetamod.jl">StoppingMeta</a> provides default tolerances, maximum ressources, ...  as well as (boolean) information on the result.</p><p>We provide some specialization of the GenericStopping for instance :</p><ul><li><a href="https://github.com/Goysa2/Stopping.jl/blob/master/src/NLPStoppingmod.jl">NLPStopping</a>: for non-linear programming;</li><li><a href="https://github.com/Goysa2/Stopping.jl/blob/master/src/LineSearchStoppingmod.jl">LS_Stopping</a>: for 1d optimization;</li><li>more to come...</li></ul><p>In these examples, the function <code>optimality_residual</code> computes the residual of the optimality conditions is an additional attribute of the type.</p><h2 id="Functions-1"><a class="docs-heading-anchor" href="#Functions-1">Functions</a><a class="docs-heading-anchor-permalink" href="#Functions-1" title="Permalink"></a></h2><p>The tool provides two functions:</p><ul><li><code>start!(stp :: AbstractStopping)</code> initializes the time and the tolerance at the starting point and check wether the initial guess is optimal.</li><li><code>stop!(stp :: AbstractStopping)</code> checks optimality of the current guess as well as failure of the system (unboundedness for instance) and maximum ressources (number of evaluations of functions, elapsed time ...)</li></ul><p>The stopping uses the informations furnished by the State to evaluate its functions. Communication between the two can be done through the following functions:</p><ul><li><code>update_and_start!(stp :: AbstractStopping; kwargs...)</code> updates the states with informations furnished as kwargs and then call start!.</li><li><code>update_and_stop!(stp :: AbstractStopping; kwargs...)</code> updates the states with informations furnished as kwargs and then call stop!.</li><li><code>fill_in!(stp :: AbstractStopping, x :: Iterate)</code> a function that fill in all the State with all the informations required to correctly evaluate the stopping functions. This can reveal useful, for instance, if the user do not trust the informations furnished by the algorithm in the State.</li></ul><h2 id="How-to-install-1"><a class="docs-heading-anchor" href="#How-to-install-1">How to install</a><a class="docs-heading-anchor-permalink" href="#How-to-install-1" title="Permalink"></a></h2><p>The stopping package can be installed and tested through the Julia package manager:</p><pre><code class="language-julia">(v0.7) pkg&gt; add https://github.com/Goysa2/Stopping.jl
(v0.7) pkg&gt; test Stopping</code></pre><p>Note that the package <a href="https://github.com/Goysa2/State.jl">State.jl</a> is required and can be installed also through the package manager:</p><pre><code class="language-julia">(v0.7) pkg&gt; add https://github.com/Goysa2/State.jl</code></pre><h2 id="Example-1"><a class="docs-heading-anchor" href="#Example-1">Example</a><a class="docs-heading-anchor-permalink" href="#Example-1" title="Permalink"></a></h2><p>As an example, a naïve version of the Newton method is provided. First we import the packages:</p><pre><code class="language-none">using NLPModels, State, Stopping</code></pre><p>We create an uncontrained quadratic optimization problem using <a href="https://github.com/JuliaSmoothOptimizers/NLPModels.jl">NLPModels</a>:</p><pre><code class="language-none">A = rand(5, 5); Q = A&#39; * A;

f(x) = 0.5 * x&#39; * Q * x
nlp = ADNLPModel(f,  ones(5))</code></pre><p>We use our NLPStopping structure by creating our State and Stopping:</p><pre><code class="language-none">nlp_at_x = NLPAtX(ones(5))
stop_nlp = NLPStopping(nlp, (x,y) -&gt; Stopping.unconstrained(x,y), nlp_at_x)</code></pre><p>Now a basic version of Newton to illustrate how to use State and Stopping.</p><pre><code class="language-none">function newton(stp :: NLPStopping)
    state = stp.current_state; xt = state.x;
    update!(state, x = xt, gx = grad(stp.pb, xt), Hx = hess(stp.pb, xt))
    OK = start!(stp)

    while !OK
        d = -inv(state.Hx) * state.gx

        xt = xt + d

        update!(state, x = xt, gx = grad(stp.pb, xt), Hx = hess(stp.pb, xt))

        OK = stop!(stp)
    end

    return stp
end

stop_nlp = newton(stop_nlp)</code></pre><p>We can look at the meta to know what happened</p><pre><code class="language-none">@show stop_nlp.meta.tired #ans: false
@show stop_nlp.meta.unbounded #ans: false
@show stop_nlp.meta.optimal #ans: true</code></pre><p>We reached optimality!</p><h2 id="Long-Term-Goals-1"><a class="docs-heading-anchor" href="#Long-Term-Goals-1">Long-Term Goals</a><a class="docs-heading-anchor-permalink" href="#Long-Term-Goals-1" title="Permalink"></a></h2><p>Future work will adress more sophisticated problems such as mixed integer optimization problems, optimization with uncertainty. The list of suggester optimality functions will be enriched with state of the art conditions.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">API »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 17 December 2019 23:37">Tuesday 17 December 2019</span>. Using Julia version 1.1.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
